<div class="dashboard-page">
    <!-- Personal Cabinet -->
    <section class="cabinet-info">
        <h2 data-translate="dashboard.cabinet">üåå Personal Cabinet</h2>
        
        <!-- Connection Status Alert -->
        <div id="connectionAlert" class="alert" style="display:none;">
            <div class="alert-content">
                <span id="alertMessage"></span>
                <button id="alertAction" class="btn-primary"></button>
            </div>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <label data-translate="dashboard.address">Address</label>
                <span id="userAddress">0x000...000</span>
            </div>
            <div class="info-item">
                <label data-translate="dashboard.balance">Balance</label>
                <span id="userBalance">0.000 BNB</span>
            </div>
            <div class="info-item">
                <label data-translate="dashboard.userId">User ID</label>
                <span id="userId">-</span>
            </div>
            <div class="info-item">
                <label data-translate="dashboard.rank">Rank</label>
                <span id="userRank">-</span>
            </div>
        </div>
        
        <div class="referral-section">
            <label data-translate="dashboard.refLink">Referral Link</label>
            <div class="referral-input-group">
                <input type="text" id="refLink" readonly>
                <button id="copyRefLink" data-translate="common.copy">Copy</button>
                <button id="generateQR" class="btn-secondary">QR</button>
            </div>
        </div>
    </section>

    <!-- Quarterly Activity -->
    <section class="quarterly-activity">
        <h3 data-translate="dashboard.quarterly">Quarterly Activity</h3>
        <div class="activity-info">
            <div class="activity-item">
                <span data-translate="dashboard.quarter">Quarter:</span>
                <span id="currentQuarter">1</span>
            </div>
            <div class="activity-item">
                <span data-translate="dashboard.lastPayment">Last Payment:</span>
                <span id="lastPayment">-</span>
            </div>
            <div class="activity-item">
                <span data-translate="dashboard.nextPayment">Next Payment:</span>
                <span id="nextPayment">-</span>
            </div>
            <div class="activity-item">
                <span data-translate="dashboard.cost">Cost:</span>
                <span id="quarterlyCost">0.075 BNB</span>
            </div>
        </div>
        
        <!-- Payment Due Warning -->
        <div id="paymentWarning" class="payment-warning" style="display:none;">
            <i class="warning-icon">‚ö†Ô∏è</i>
            <span data-translate="dashboard.paymentDue">Payment Due in</span>
            <span id="daysRemaining">10</span>
            <span data-translate="dashboard.days">days</span>
        </div>
        
        <button id="payActivityBtn" class="btn-primary" data-translate="dashboard.payActivity">Pay Activity</button>
    </section>

    <!-- Level Management -->
    <section class="level-management">
        <h3 data-translate="dashboard.levelMgmt">Level Management</h3>
        
        <div class="auto-upgrade-info">
            <i class="info-icon">‚ÑπÔ∏è</i>
            <span data-translate="dashboard.autoUpgrade">Auto-upgrade starts from level 4</span>
        </div>
        
        <div class="levels-grid">
            <div class="levels-individual">
                <h4 data-translate="dashboard.individual">Individual Purchase</h4>
                <div class="levels-row" id="individualLevels">
                    <!-- Generated levels 1-12 -->
                </div>
            </div>
            <div class="levels-bulk">
                <h4 data-translate="dashboard.bulk">Bulk Purchase</h4>
                <div class="bulk-buttons">
                    <button class="bulk-btn" data-levels="4" data-package="1">
                        1-4 <span class="price" data-total="0.021">0.021</span> BNB
                    </button>
                    <button class="bulk-btn" data-levels="7" data-package="2">
                        1-7 <span class="price" data-total="0.117">0.117</span> BNB
                    </button>
                    <button class="bulk-btn" data-levels="10" data-package="3">
                        1-10 <span class="price" data-total="0.885">0.885</span> BNB
                    </button>
                    <button class="bulk-btn" data-levels="12" data-package="4">
                        1-12 <span class="price" data-total="3.957">3.957</span> BNB
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Earnings by Rank -->
    <section class="earnings-rank">
        <h3 data-translate="dashboard.earnings">üíé Earnings by Ranks</h3>
        <div class="earnings-list" id="earningsRank">
            <!-- Generated earnings -->
        </div>
        <div class="total-earnings">
            <strong>
                <span data-translate="ranks.total">Total Income</span>: 
                <span id="totalIncome">0 BNB</span>
            </strong>
        </div>
    </section>

    <!-- Transaction History -->
    <section class="transaction-history">
        <h3 data-translate="dashboard.history">Transaction History</h3>
        <div class="history-controls">
            <select id="historyFilter">
                <option value="all">All Types</option>
                <option value="level">Level Purchase</option>
                <option value="partner">Partner Bonus</option>
                <option value="matrix">Matrix Bonus</option>
                <option value="quarterly">Quarterly Activity</option>
            </select>
            <button id="refreshHistory" class="btn-secondary" data-translate="common.refresh">Refresh</button>
        </div>
        <div class="history-table">
            <table>
                <thead>
                    <tr>
                        <th data-translate="common.number">‚Ññ</th>
                        <th data-translate="common.level">Level</th>
                        <th data-translate="common.amount">Amount</th>
                        <th data-translate="common.date">Date</th>
                        <th>ID</th>
                        <th data-translate="common.type">Type</th>
                    </tr>
                </thead>
                <tbody id="historyTable">
                    <tr>
                        <td colspan="6" class="no-data" data-translate="common.loading">Loading...</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- Tokens Summary -->
    <section class="tokens-summary">
        <h3 data-translate="dashboard.tokens">Tokens</h3>
        <div class="token-info-grid">
            <div class="token-info-item">
                <span data-translate="tokens.amount">Amount:</span>
                <span id="tokenAmount">0 GWT</span>
            </div>
            <div class="token-info-item">
                <span data-translate="tokens.price">Price:</span>
                <span id="tokenPrice">$0.00</span>
            </div>
            <div class="token-info-item">
                <span data-translate="tokens.value">Value:</span>
                <span id="tokenValue">$0.00</span>
            </div>
        </div>
        <button class="btn-secondary" onclick="showPage('tokens')" data-translate="tokens.manage">Manage</button>
    </section>

    <!-- Tokens Summary -->
    <section class="tokens-summary">
        <h3 data-translate="dashboard.tokens">Tokens</h3>
        <div class="token-info-grid">
            <div class="token-info-item">
                <span data-translate="tokens.amount">Amount:</span>
                <span id="tokenAmount">0 GWT</span>
            </div>
            <div class="token-info-item">
                <span data-translate="tokens.price">Price:</span>
                <span id="tokenPrice">$0.00</span>
            </div>
            <div class="token-info-item">
                <span data-translate="tokens.value">Value:</span>
                <span id="tokenValue">$0.00</span>
            </div>
        </div>
        <button class="btn-secondary" onclick="showPage('tokens')" data-translate="tokens.manage">Manage</button>
    </section>

    <!-- üî• –ù–û–í–û–ï: Debug Tools –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <section class="debug-tools" style="padding:20px;background:rgba(255,0,0,0.1);margin:20px 0;border-radius:8px;border:2px dashed #ff4444;">
        <h4 style="color:#ff4444;margin-bottom:10px;">üîß Debug Tools (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)</h4>
        <button onclick="clearCacheAndReload()" style="padding:12px 20px;background:#ff4444;color:#fff;border:none;border-radius:5px;cursor:pointer;font-weight:600;font-size:14px;">
            üóëÔ∏è Clear Cache & Reload
        </button>
        <p style="font-size:12px;color:#888;margin-top:8px;">–ò—Å–ø–æ–ª—å–∑—É–π –µ—Å–ª–∏ –∫–æ—à–µ–ª–µ–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∏–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏</p>
    </section>

    <script>
    function clearCacheAndReload() {
      if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å –∫–µ—à –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å?\n\n–≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.')) {
        console.log('üóëÔ∏è Clearing all cache...');
        
        // –û—á–∏—Å—Ç–∫–∞ localStorage
        localStorage.clear();
        console.log('‚úÖ localStorage cleared');
        
        // –û—á–∏—Å—Ç–∫–∞ Service Worker
        if ('serviceWorker' in navigator) {
          navigator.serviceWorker.getRegistrations().then(regs => {
            regs.forEach(reg => {
              reg.unregister();
              console.log('‚úÖ Service Worker unregistered');
            });
          });
        }
        
        // –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –±—Ä–∞—É–∑–µ—Ä–∞
        if ('caches' in window) {
          caches.keys().then(names => {
            names.forEach(name => {
              caches.delete(name);
              console.log('‚úÖ Cache deleted:', name);
            });
          });
        }
        
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ë–ï–ó –∫–µ—à–∞ —á–µ—Ä–µ–∑ 500ms
        setTimeout(() => {
          console.log('üîÑ Reloading without cache...');
          window.location.reload(true);
        }, 500);
      }
    }
    </script>
</div>
</div>
